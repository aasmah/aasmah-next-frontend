{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aas_8\\\\Desktop\\\\restaurant stripe\\\\components\\\\context\\\\AppProvider.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* /components/Context/AppProvider */\nimport React from \"react\";\nimport Cookies from \"js-cookie\";\n/* First we will make a new context */\n\nconst AppContext = /*#__PURE__*/React.createContext();\n/* Then create a provider Component */\n\nclass AppProvider extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"addItem\", item => {\n      let {\n        items\n      } = this.state; //check for item already in cart\n      //if not in cart, add item if item is found increase quanity ++\n\n      const newItem = items.find(i => i._id === item._id);\n\n      if (!newItem) {\n        //set quantity property to 1\n        item.quantity = 1;\n        this.setState({\n          items: this.state.items.concat(item),\n          total: this.state.total + item.price\n        }, () => Cookies.set(\"cart\", this.state.items));\n      } else {\n        this.setState({\n          items: this.state.items.map(item => item._id === newItem._id ? Object.assign({}, item, {\n            quantity: item.quantity + 1\n          }) : item),\n          total: this.state.total + item.price\n        }, () => Cookies.set(\"cart\", this.state.items));\n      }\n    });\n\n    _defineProperty(this, \"removeItem\", item => {\n      let {\n        items\n      } = this.state; //check for item already in cart\n      //if not in cart, add item if item is found increase quanity ++\n\n      const newItem = items.find(i => i._id === item._id);\n\n      if (newItem.quantity > 1) {\n        this.setState({\n          items: this.state.items.map(item => item._id === newItem._id ? Object.assign({}, item, {\n            quantity: item.quantity - 1\n          }) : item),\n          total: this.state.total - item.price\n        }, () => Cookies.set(\"cart\", this.state.items));\n      } else {\n        const items = [...this.state.items];\n        const index = items.findIndex(i => i._id === newItem._id);\n        items.splice(index, 1);\n        this.setState({\n          items: items,\n          total: this.state.total - item.price\n        }, () => Cookies.set(\"cart\", this.state.items));\n      }\n    });\n\n    this.state = {\n      items: [],\n      total: null\n    };\n  }\n\n  componentDidMount() {\n    const cart = Cookies.getJSON(\"cart\"); //if items in cart, set items and total from cookie\n\n    console.log(cart);\n    let total;\n\n    if (cart) {\n      cart.forEach(item => {\n        total = item.price * item.quantity;\n        this.setState({\n          items: cart,\n          total: total\n        });\n      });\n    }\n  }\n\n  render() {\n    return __jsx(AppContext.Provider, {\n      value: {\n        items: this.state.items,\n        addItem: this.addItem,\n        removeItem: this.removeItem,\n        total: this.state.total\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, this.props.children);\n  }\n\n}\n/* then make a consumer which will surface it as an HOC */\n// This function takes a component...\n\n\nexport function withContext(Component) {\n  // ...and returns another component...\n  return function ContextComponent(props) {\n    // ... and renders the wrapped component with the context theme!\n    // Notice that we pass through any additional props as well\n    return __jsx(AppContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 7\n      }\n    }, context => __jsx(Component, _extends({}, props, {\n      context: context,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    })));\n  };\n}\nexport default AppProvider;","map":{"version":3,"sources":["C:/Users/aas_8/Desktop/restaurant stripe/components/context/AppProvider.js"],"names":["React","Cookies","AppContext","createContext","AppProvider","Component","constructor","props","item","items","state","newItem","find","i","_id","quantity","setState","concat","total","price","set","map","Object","assign","index","findIndex","splice","componentDidMount","cart","getJSON","console","log","forEach","render","addItem","removeItem","children","withContext","ContextComponent","context"],"mappings":"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","sourcesContent":["/* /components/Context/AppProvider */\n\nimport React from \"react\";\nimport Cookies from \"js-cookie\";\n/* First we will make a new context */\nconst AppContext = React.createContext();\n\n/* Then create a provider Component */\nclass AppProvider extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: [],\n      total: null\n    };\n  }\n  componentDidMount() {\n    const cart = Cookies.getJSON(\"cart\");\n    //if items in cart, set items and total from cookie\n    console.log(cart);\n    let total;\n    if (cart) {\n      cart.forEach(item => {\n        total = item.price * item.quantity;\n        this.setState({ items: cart, total: total });\n      });\n    }\n  }\n\n  addItem = item => {\n    let { items } = this.state;\n    //check for item already in cart\n    //if not in cart, add item if item is found increase quanity ++\n    const newItem = items.find(i => i._id === item._id);\n\n    if (!newItem) {\n      //set quantity property to 1\n      item.quantity = 1;\n      this.setState(\n        {\n          items: this.state.items.concat(item),\n          total: this.state.total + item.price\n        },\n        () => Cookies.set(\"cart\", this.state.items)\n      );\n    } else {\n      this.setState(\n        {\n          items: this.state.items.map(\n            item =>\n              item._id === newItem._id\n                ? Object.assign({}, item, { quantity: item.quantity + 1 })\n                : item\n          ),\n          total: this.state.total + item.price\n        },\n        () => Cookies.set(\"cart\", this.state.items)\n      );\n    }\n  };\n  removeItem = item => {\n    let { items } = this.state;\n    //check for item already in cart\n    //if not in cart, add item if item is found increase quanity ++\n    const newItem = items.find(i => i._id === item._id);\n    if (newItem.quantity > 1) {\n      this.setState(\n        {\n          items: this.state.items.map(\n            item =>\n              item._id === newItem._id\n                ? Object.assign({}, item, { quantity: item.quantity - 1 })\n                : item\n          ),\n          total: this.state.total - item.price\n        },\n        () => Cookies.set(\"cart\", this.state.items)\n      );\n    } else {\n      const items = [...this.state.items];\n      const index = items.findIndex(i => i._id === newItem._id);\n\n      items.splice(index, 1);\n      this.setState(\n        { items: items, total: this.state.total - item.price },\n        () => Cookies.set(\"cart\", this.state.items)\n      );\n    }\n  };\n  render() {\n    return (\n      <AppContext.Provider\n        value={{\n          items: this.state.items,\n          addItem: this.addItem,\n          removeItem: this.removeItem,\n          total: this.state.total\n        }}\n      >\n        {this.props.children}\n      </AppContext.Provider>\n    );\n  }\n}\n\n/* then make a consumer which will surface it as an HOC */\n// This function takes a component...\nexport function withContext(Component) {\n  // ...and returns another component...\n  return function ContextComponent(props) {\n    // ... and renders the wrapped component with the context theme!\n    // Notice that we pass through any additional props as well\n    return (\n      <AppContext.Consumer>\n        {context => <Component {...props} context={context} />}\n      </AppContext.Consumer>\n    );\n  };\n}\n\nexport default AppProvider;"]},"metadata":{},"sourceType":"module"}
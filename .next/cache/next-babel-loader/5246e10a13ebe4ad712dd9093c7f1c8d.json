{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\aas_8\\\\Desktop\\\\restaurant stripe\\\\components\\\\Context\\\\AppProvider.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/* /components/Context/AppProvider */\nimport React from \"react\";\nimport Cookies from \"js-cookie\";\n/* First we will make a new context */\n\nvar AppContext = /*#__PURE__*/React.createContext();\n/* Then create a provider Component */\n\nvar AppProvider = /*#__PURE__*/function (_React$Component) {\n  _inherits(AppProvider, _React$Component);\n\n  var _super = _createSuper(AppProvider);\n\n  function AppProvider(props) {\n    var _this;\n\n    _classCallCheck(this, AppProvider);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"addItem\", function (item) {\n      var items = _this.state.items; //check for item already in cart\n      //if not in cart, add item if item is found increase quanity ++\n\n      var newItem = items.find(function (i) {\n        return i._id === item._id;\n      });\n\n      if (!newItem) {\n        //set quantity property to 1\n        item.quantity = 1;\n\n        _this.setState({\n          items: _this.state.items.concat(item),\n          total: _this.state.total + item.price\n        }, function () {\n          return Cookies.set(\"cart\", _this.state.items);\n        });\n      } else {\n        _this.setState({\n          items: _this.state.items.map(function (item) {\n            return item._id === newItem._id ? Object.assign({}, item, {\n              quantity: item.quantity + 1\n            }) : item;\n          }),\n          total: _this.state.total + item.price\n        }, function () {\n          return Cookies.set(\"cart\", _this.state.items);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeItem\", function (item) {\n      var items = _this.state.items; //check for item already in cart\n      //if not in cart, add item if item is found increase quanity ++\n\n      var newItem = items.find(function (i) {\n        return i._id === item._id;\n      });\n\n      if (newItem.quantity > 1) {\n        _this.setState({\n          items: _this.state.items.map(function (item) {\n            return item._id === newItem._id ? Object.assign({}, item, {\n              quantity: item.quantity - 1\n            }) : item;\n          }),\n          total: _this.state.total - item.price\n        }, function () {\n          return Cookies.set(\"cart\", _this.state.items);\n        });\n      } else {\n        var _items = _toConsumableArray(_this.state.items);\n\n        var index = _items.findIndex(function (i) {\n          return i._id === newItem._id;\n        });\n\n        _items.splice(index, 1);\n\n        _this.setState({\n          items: _items,\n          total: _this.state.total - item.price\n        }, function () {\n          return Cookies.set(\"cart\", _this.state.items);\n        });\n      }\n    });\n\n    _this.state = {\n      items: [],\n      total: null\n    };\n    return _this;\n  }\n\n  _createClass(AppProvider, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var cart = Cookies.getJSON(\"cart\"); //if items in cart, set items and total from cookie\n\n      console.log(cart);\n      var total;\n\n      if (cart) {\n        cart.forEach(function (item) {\n          total = item.price * item.quantity;\n\n          _this2.setState({\n            items: cart,\n            total: total\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(AppContext.Provider, {\n        value: {\n          items: this.state.items,\n          addItem: this.addItem,\n          removeItem: this.removeItem,\n          total: this.state.total\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 7\n        }\n      }, this.props.children);\n    }\n  }]);\n\n  return AppProvider;\n}(React.Component);\n/* then make a consumer which will surface it as an HOC */\n// This function takes a component...\n\n\nexport function withContext(Component) {\n  // ...and returns another component...\n  return function ContextComponent(props) {\n    var _this3 = this;\n\n    // ... and renders the wrapped component with the context theme!\n    // Notice that we pass through any additional props as well\n    return __jsx(AppContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 7\n      }\n    }, function (context) {\n      return __jsx(Component, _extends({}, props, {\n        context: context,\n        __self: _this3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }\n      }));\n    });\n  };\n}\nexport default AppProvider;","map":{"version":3,"sources":["C:/Users/aas_8/Desktop/restaurant stripe/components/Context/AppProvider.js"],"names":["React","Cookies","AppContext","createContext","AppProvider","props","item","items","state","newItem","find","i","_id","quantity","setState","concat","total","price","set","map","Object","assign","index","findIndex","splice","cart","getJSON","console","log","forEach","addItem","removeItem","children","Component","withContext","ContextComponent","context"],"mappings":"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","sourcesContent":["/* /components/Context/AppProvider */\n\nimport React from \"react\";\nimport Cookies from \"js-cookie\";\n/* First we will make a new context */\nconst AppContext = React.createContext();\n\n/* Then create a provider Component */\nclass AppProvider extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: [],\n      total: null\n    };\n  }\n  componentDidMount() {\n    const cart = Cookies.getJSON(\"cart\");\n    //if items in cart, set items and total from cookie\n    console.log(cart);\n    let total;\n    if (cart) {\n      cart.forEach(item => {\n        total = item.price * item.quantity;\n        this.setState({ items: cart, total: total });\n      });\n    }\n  }\n\n  addItem = item => {\n    let { items } = this.state;\n    //check for item already in cart\n    //if not in cart, add item if item is found increase quanity ++\n    const newItem = items.find(i => i._id === item._id);\n\n    if (!newItem) {\n      //set quantity property to 1\n      item.quantity = 1;\n      this.setState(\n        {\n          items: this.state.items.concat(item),\n          total: this.state.total + item.price\n        },\n        () => Cookies.set(\"cart\", this.state.items)\n      );\n    } else {\n      this.setState(\n        {\n          items: this.state.items.map(\n            item =>\n              item._id === newItem._id\n                ? Object.assign({}, item, { quantity: item.quantity + 1 })\n                : item\n          ),\n          total: this.state.total + item.price\n        },\n        () => Cookies.set(\"cart\", this.state.items)\n      );\n    }\n  };\n  removeItem = item => {\n    let { items } = this.state;\n    //check for item already in cart\n    //if not in cart, add item if item is found increase quanity ++\n    const newItem = items.find(i => i._id === item._id);\n    if (newItem.quantity > 1) {\n      this.setState(\n        {\n          items: this.state.items.map(\n            item =>\n              item._id === newItem._id\n                ? Object.assign({}, item, { quantity: item.quantity - 1 })\n                : item\n          ),\n          total: this.state.total - item.price\n        },\n        () => Cookies.set(\"cart\", this.state.items)\n      );\n    } else {\n      const items = [...this.state.items];\n      const index = items.findIndex(i => i._id === newItem._id);\n\n      items.splice(index, 1);\n      this.setState(\n        { items: items, total: this.state.total - item.price },\n        () => Cookies.set(\"cart\", this.state.items)\n      );\n    }\n  };\n  render() {\n    return (\n      <AppContext.Provider\n        value={{\n          items: this.state.items,\n          addItem: this.addItem,\n          removeItem: this.removeItem,\n          total: this.state.total\n        }}\n      >\n        {this.props.children}\n      </AppContext.Provider>\n    );\n  }\n}\n\n/* then make a consumer which will surface it as an HOC */\n// This function takes a component...\nexport function withContext(Component) {\n  // ...and returns another component...\n  return function ContextComponent(props) {\n    // ... and renders the wrapped component with the context theme!\n    // Notice that we pass through any additional props as well\n    return (\n      <AppContext.Consumer>\n        {context => <Component {...props} context={context} />}\n      </AppContext.Consumer>\n    );\n  };\n}\n\nexport default AppProvider;"]},"metadata":{},"sourceType":"module"}